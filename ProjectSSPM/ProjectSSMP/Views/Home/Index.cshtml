@model IEnumerable<ProjectSSMP.Models.Timesheet.TimeSheetInputModel>
@{
    ViewData["Title"] = "Home Page";
    Layout = "~/Views/Shared/_LayoutMenu.cshtml";
}
@section Styles {
    <link rel="stylesheet" href="~/css/sortableKanbanBoards.css" />
}

<div class="container">
    @*@await Component.InvokeAsync("NToastNotify.Toastr")*@
    <h2 class="well">DashBoard</h2>
    <div class="col-lg-2">
        <div id="sortableKanbanBoards" class="row">
            @{
                IEnumerable<ProjectSSMP.Models.Home.CreateBulletinModel> Bulletin =
                    ViewData["Bulletin"] as IEnumerable<ProjectSSMP.Models.Home.CreateBulletinModel>;

            }
            <!--sütun başlangıç-->
            <div class="panel panel-primary kanban-col">
                <div class="panel-heading">
                    Bulletin Board
                    <i class="glyphicon glyphicon-heart-empty pull-right"></i>
                </div>
                <div class="panel-body">
                    <div id="DOING" class="kanban-centered">
                        @foreach (var item in Bulletin)
                        {
                            <article class="kanban-entry grab" id="@item.Bnumber" draggable="true">
                                <div class="kanban-entry-inner">

                                    <div class="kanban-label">

                                        <h2>@item.Subject</h2>
                                        <p>@item.Note</p>
                                        <p><small class="text-muted"><i class="glyphicon glyphicon-pencil"></i> @item.Username &nbsp <i class="glyphicon glyphicon-time"></i> @item.Time </small></p>
                                    </div>
                                </div>
                            </article>
                        }


                    </div>
                </div>
                <div class="panel-footer">
                    <a href="javascript:void(0);" class="anchorDetail btn btn-warning btn-sm">Add New...</a>
                </div>
            </div>
            <!--sütun bitiş-->

        </div>
    </div>



    <div class="col-lg-10">
        <div class="row">
            @{
                var project = Model.GroupBy(s => s.ProjectName);
            }
            @foreach (var item in project)
            {

                <div class="[ col-xs-12 col-sm-offset-2 col-sm-8 ]">
                    <ul class="event-list">
                        <li>
                            @{
                                var pronum = item.GroupBy(s => s.ProjectNumber);
                                var proid = item.GroupBy(s => s.ProjectId);
                                var pronote = item.GroupBy(s => s.Note);
                                var proend = item.GroupBy(s => s.ProjectEnd);
                            }

                            <time datetime="2014-07-20">
                                <span class="day">4</span>
                                <span class="month">Jul</span>
                                <span class="year">2014</span>
                                <span class="time">ALL DAY</span>
                            </time>
                            <div class="info">
                                <h2 class="title">@item.Key</h2>

                                @foreach (var itemnum in pronum)
                                {
                                    <input type="hidden" value="@itemnum.Key" name="ProjectNumber" id="ProjectNumber" />
                                }

                                <p class="desc">
                                    @foreach (var itemnote in pronote)
                                    {
                                        @itemnote.Key
                                    }
                                </p>

                            </div>
                            <div class="social">
                                @foreach (var itemnum in pronum)
                                {
                                    <ul>
                                        <li class="google-plus" style="width:33%;"><a asp-action="CheckTimeline" asp-route-id="@itemnum.Key"><span class="fa fa-arrow-right"></span></a></li>
                                    </ul>
                                    <ul>
                                        <li class="facebook" style="width:33%;"><a href="/ProjectManagement/"><span class="fa fa-gear"></span></a></li>
                                    </ul>

                                    <ul>
                                        <li class="twitter" style="width:33%;"><a asp-action="Result" asp-route-id="@itemnum.Key"><span class="fa fa-file-text-o"></span></a></li>
                                    </ul>

                                }
                            </div>
                        </li>

                    </ul>
                </div>
            }
        </div>
    </div>
</div>



<div id='myModal' class='modal'>
    <div class="modal-dialog">
        <div class="modal-content">
            <div id='myModalContent'></div>
        </div>
    </div>

</div>

@section scripts
    {
    <script src="~/js/bulletin.js"></script>

    <script>

        var TeamDetailPostBackURL = '/Home/AddBulletin/';
        $(function () {
            $(".anchorDetail").click(function () {
                //debugger;
                var $buttonClicked = $(this);
                var id = $buttonClicked.attr('data-id');
                var options = { "backdrop": "static", keyboard: true };
                $.ajax({
                    type: "GET",
                    url: TeamDetailPostBackURL,
                    contentType: "application/json; charset=utf-8",
                    data: { "Id": id },
                    datatype: "json",
                    success: function (data) {
                        //debugger;
                        $('#myModalContent').html(data);
                        $('#myModal').modal(options);
                        $('#myModal').modal('show');

                    },
                    error: function () {
                        alert("Dynamic content load failed.");
                    }
                });
            });
            //$("#closebtn").on('click',function(){
            //    $('#myModal').modal('hide');

            $("#closbtn").click(function () {
                $('#myModal').modal('hide');
            });
        });

    </script>

}




